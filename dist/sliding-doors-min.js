/**
 *  Custom element that renders a sliding doors effect
 *
 *  @author Holmes Bryant <https://github.com/HolmesBryant>
 *  @license GPL-3.0
*/
export default class SlidingDoors extends HTMLElement{#t=!1;#e=".5s";#n="auto";container;themes={default:{tintOuter:"dimgray",tintMiddle:"lightgray 40%",tintInner:"white 90%"},light:{tintOuter:"rgb(220,220,220)",tintMiddle:"rgb(250,250,250) 40%",tintInner:"white 90%"},dark:{tintOuter:"rgb(40,40,40)",tintMiddle:"rgb(70,70,70) 40%",tintInner:"dimgray 90%"},auto:{}};wrapper;static observedAttributes=["active","speed","theme"];constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=`<style>:host {border-radius: inherit;display: inline-block;opacity: 0;overflow: hidden;--speed: ${this.speed};--tintOuter: ${this.themes.default.tintOuter};--tintMiddle: ${this.themes.default.tintMiddle};--tintInner: ${this.themes.default.tintInner};transition: all .5s;}::slotted(*) {height: 100%;}@keyframes close {100% { z-index: 1; }}@keyframes open {100% { z-index: -1 }}@layer container {#container {height: 100%;position: relative;}#container::before,#container::after {border-width: 1px;border-style: solid;border-color: silver;content: '';position: absolute;bottom: 0;top: 0;z-index: 1;}#container.shadow::before,#container.shadow::after {box-shadow: 5px 5px 10px rgb(40,40,40);}#container.shadow::before {border-width: 1px 0 1px 1px;}#container.shadow::after {border-width: 1px 1px 1px 0;}#container::before {background-color: var(--tintOuter);background-image: linear-gradient(to right,var(--tintOuter),var(--tintMiddle),var(--tintInner));border-width: 0;left: 0;right: 100%;transition: right var(--speed) ease-in;}#container::after {background-image: linear-gradient(to left,var(--tintOuter),var(--tintMiddle),var(--tintInner));border-width: 0;left: 100%;right: 0;transition: left var(--speed) ease-in;}} /* @container */@layer effect {#effectLeft,#effectRight {aspect-ratio: 1/1;display: flex;flex-direction: column;justify-content: center;content: '';position: absolute;top: 50%;transition: all var(--speed) ease-in;z-index: 1;}#effectLeft {left: 0;right: 100%;transform: translateY(-50%) translateX(50%);-webkit-mask-image: linear-gradient( to right, white 50%, transparent 51% );mask-image: linear-gradient( to right, white 50%, transparent 51% );}#effectRight {left: 100%;right: 0;transform: translateY(-50%) translateX(-50%);-webkit-mask-image: linear-gradient( to left, white 50%, transparent 50% );mask-image: linear-gradient( to left, white 50%, transparent 50% );}} /* @effect */@layer wrapper {#wrapper {height: 100%;position: relative;}#wrapper.active #effectLeft,#wrapper.active #container::before {right: 50%;}#wrapper.active #effectRight,#wrapper.active #container::after {left: 50%;}} /* @wrapper */#scrollable {overflow: auto;padding-right: 16px;}</style><div id="wrapper" part="wrapper"><div id="container" part="container"><div id="scrollable"><slot></slot></div></div><div id="effectLeft"><slot name="effectLeft"></slot></div><div id="effectRight"><slot name="effectRight"></slot></div></div>`,this.wrapper=this.shadowRoot.querySelector("#wrapper"),this.container=this.shadowRoot.querySelector("#container")}attributeChangedCallback(t,e,n){this[t]=n}connectedCallback(){const t=this.querySelector("*[slot=effect]");this.setEffect(t),this.style.opacity="1",this.active&&this.container.classList.add("shadow"),this.container.addEventListener("transitionstart",(()=>{this.active&&this.container.classList.add("shadow")})),this.container.addEventListener("transitionend",(()=>{this.active||this.container.classList.remove("shadow")}))}setEffect(t){if(!t)return;const e=t.cloneNode(!0);t.setAttribute("slot","effectLeft"),e.setAttribute("slot","effectRight"),this.append(e)}get active(){return this.#t}set active(t){switch(t){case"":case"true":t=!0,this.wrapper.classList.add("active");break;default:t=!1,this.wrapper.classList.remove("active")}this.#t=t}get speed(){return this.#e}set speed(t){isNaN(t)||(t+="s"),this.#e=t,this.style.setProperty("--speed",t)}get theme(){return this.#n}set theme(t){switch(t){case"auto":t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";break;case"light":case"dark":break;default:t="default"}this.#n=t;const e=this.themes[t];e&&(this.tintOuter=e.tintOuter,this.tintMiddle=e.tintMiddle,this.tintInner=e.tintInner,this.style.setProperty("--tintOuter",e.tintOuter),this.style.setProperty("--tintMiddle",e.tintMiddle),this.style.setProperty("--tintInner",e.tintInner))}}document.addEventListener("DOMContentLoaded",customElements.define("sliding-doors",SlidingDoors));
